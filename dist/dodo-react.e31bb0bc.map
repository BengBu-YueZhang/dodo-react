{"version":3,"sources":["react/create-element.js","react-dom/dom.js","react-dom/diff.js","react-dom/component.js","react/component.js","react/index.js","react-dom/render.js","react-dom/index.js","index.js"],"names":["createElement","tag","attrs","children","setAttribute","dom","attr","value","factAttr","factValue","styleObj","key","test","eventName","match","toLowerCase","addEventListener","innerHTML","__html","isSameNodeType","node","vnode","nodeType","nodeName","diff","container","out","undefined","String","diffString","diffDOM","diffComponent","diffAttributes","length","console","log","diffChildren","parentNode","appendChild","oldAttrs","newAttrs","attributes","Array","from","forEach","name","vchildren","notKeyedChildren","keyed","childNodes","child","push","vchild","i","findedChild","index","splice","shift","component","_component","constructor","base","nodeValue","document","createTextNode","replaceChild","parnetNode","createComponent","Constructor","props","inst","prototype","render","renderComponent","isForceUpdate","isUpdate","state","prevState","prevProps","getDerivedStateFromProps","Object","assign","skip","shouldComponentUpdate","componentDidUpdate","componentDidMount","unmountComponent","componentWillUnMount","removeChild","setComponentProps","stateQueue","renderQueue","enqueueSetState","stateChange","Promise","resolve","then","flushComponent","includes","item","Component","Title","text","React","App","greet","count","handleAdd","bind","nextProps","nextState","setTimeout","setState","snapshot","ReactDOM","getElementById"],"mappings":"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","file":"dodo-react.e31bb0bc.map","sourceRoot":"..","sourcesContent":["/**\n * @example\n * <h1> hello world </h1>\n * 可以通过jsx被转化为\n * createElement('h1', {id: 'greet'}, 'hello world')\n */\nexport default function createElement(tag, attrs, ...children) {\n  return {\n    tag,\n    attrs,\n    children\n  }\n}\n","export function setAttribute(dom, attr, value) {\n  let factAttr = attr,\n    factValue = value\n\n  if (attr === 'style') {\n    factValue = ''\n    let styleObj = value\n    for (let key in styleObj) {\n      factValue += `${key} : ${styleObj[key]}`\n    }\n  }\n\n  if (attr === 'className') {\n    factAttr = 'class'\n  }\n\n  if (/on([a-zA-Z]+)/.test(attr)) {\n    const eventName = attr.match(/on([a-zA-Z]+)/)[1].toLowerCase()\n    dom.addEventListener(eventName, value)\n    return\n  }\n\n  if (attr === 'dangerouslySetInnerHTML') {\n    dom.innerHTML = value && value.__html\n    return\n  }\n\n  dom.setAttribute(factAttr, factValue)\n}\n","import {\n  setComponentProps,\n  createComponent,\n  unmountComponent\n} from './component'\nimport { setAttribute } from './dom'\n\nexport function isSameNodeType(node, vnode) {\n  if (node.nodeType === 3 && typeof vnode === 'string') {\n    return true\n  } else {\n    return node.nodeName.toLowerCase() === vnode && vnode.tag\n  }\n}\n\n/**\n * @param {HTMLElemnet} dom 当前对比的dom树\n * @param {VNode} node dom树对应的vnode\n * @returns {HTMLElemnet} 更新后的dom\n */\nexport default function diff(dom, vnode, container) {\n  // 对比文字\n  let out = dom\n\n  if (typeof vnode === 'boolean' || vnode === null || vnode === undefined) {\n    vnode = ''\n  }\n\n  if (typeof vnode === 'number') {\n    vnode = String(vnode)\n  }\n\n  if (typeof vnode === 'string') {\n    out = diffString(dom, vnode)\n  }\n\n  // 对比dom节点\n  if (typeof vnode.tag === 'string') {\n    out = diffDOM(dom, vnode)\n  }\n\n  // 如果节点是个component实例\n  if (typeof vnode.tag === 'function') {\n    out = diffComponent(dom, vnode)\n  }\n\n  if (vnode.attrs) {\n    diffAttributes(out, vnode.attrs)\n  }\n\n  if (vnode.children && vnode.children.length) {\n    console.log(vnode)\n    diffChildren(out, vnode.children)\n  }\n\n  if (container && out.parentNode !== container) {\n    container.appendChild && container.appendChild(out)\n  }\n\n  return out\n}\n\nfunction diffAttributes(dom, attrs) {\n  let oldAttrs = {}\n  let newAttrs = attrs || {}\n\n  if (dom && dom.attributes) {\n    Array.from(dom.attributes).forEach(attr => {\n      oldAttrs[attr.name] = attr.value\n    })\n  }\n\n  for (let attr in oldAttrs) {\n    if (!attr in newAttrs) {\n      setAttribute(dom, attr, undefined)\n    }\n  }\n\n  for (let attr in newAttrs) {\n    if (newAttrs[attr] !== oldAttrs[attr]) {\n      setAttribute(dom, attr, newAttrs[attr])\n    }\n  }\n}\n\n/**\n * @param {HTMLElement} dom dom节点\n * @param {Array[VNode]} vchildren vnode节点\n */\nfunction diffChildren(dom, vchildren) {\n  const notKeyedChildren = [] // 没有key的child\n  const keyed = {} // 有key的child\n\n  // 分离有key和没有key的child，因为如果有key的话，可以更加方便的对比\n  Array.from(dom.childNodes).forEach(child => {\n    if (child.key) {\n      keyed[key] = children\n    } else {\n      notKeyedChildren.push(child)\n    }\n  })\n\n  // 遍历所有vchildren\n  if (vchildren && vchildren.length > 0) {\n    vchildren.forEach((vchild, i) => {\n      const key = vchild && vchild.key\n      let findedChild\n\n      if (key) {\n        if (keyed[key]) {\n          findedChild = keyed[key]\n          keyed[key] = undefined\n        }\n      } else {\n        notKeyedChildren.forEach((child, index) => {\n          if (isSameNodeType(child, vchild)) {\n            findedChild = child\n            notKeyedChildren.splice(index, 1)\n          }\n        })\n      }\n\n      if (!findedChild) {\n        findedChild = notKeyedChildren.shift()\n      }\n\n      diff(findedChild, vchild, dom)\n    })\n  }\n}\n\nfunction diffComponent(dom, vnode) {\n  let out = dom\n  let component = dom && dom._component\n\n  if (component && component.constructor === vnode.tag) {\n    out = setComponentProps(component, vnode.attrs)\n    dom = component.base\n  } else {\n    if (component) {\n      unmountComponent(component)\n    }\n    component = createComponent(vnode.tag)\n    out = setComponentProps(component, vnode.attrs)\n  }\n\n  return out\n}\n\nfunction diffString(dom, vnode) {\n  let out = dom\n  if (dom && dom.nodeType === 3) {\n    if (dom.nodeValue != vnode) {\n      dom.nodeValue = vnode\n    }\n  } else {\n    out = document.createTextNode(vnode)\n    if (dom && dom.parentNode) {\n      dom.parentNode.replaceChild(out, dom)\n    }\n  }\n  return out\n}\n\nfunction diffDOM(dom, vnode) {\n  let out = dom\n  if (!dom || vnode.tag.toLowerCase() !== dom.nodeName.toLowerCase()) {\n    out = document.createElement(vnode.tag)\n    if (dom && dom.childNodes) {\n      dom.childNodes.forEach(out.appendChild)\n    }\n    if (dom && dom.parnetNode) {\n      dom.parnetNode.replaceChild(out, dom)\n    }\n  }\n  return out\n}\n","import diff from './diff'\n\n/**\n * @description 实例化组件\n * @param {function} Constructor vnode.tagName\n * @param {object} props vnode.attrs\n * @return {'import ../react/component'.instance} Constrcutor instance\n */\nexport function createComponent(Constructor, props) {\n  let inst\n\n  if (Constructor.prototype && Constructor.prototype.render) {\n    inst = new Constructor()\n  } else {\n    inst = new Constructor()\n    inst.constructor = Constructor\n    inst.render = function() {\n      return inst.constructor(props)\n    }\n  }\n\n  return inst\n}\n\n/**\n * @description 渲染组件\n * @param {'import ../react/component'.instance} component\n * @return dom\n */\nexport function renderComponent(component, isForceUpdate) {\n  const isUpdate = !!component.base\n\n  let props = component.props,\n    state = component.state,\n    prevState = component.prevState || state,\n    prevProps = component.prevProps || props\n\n  if (component.constructor.getDerivedStateFromProps) {\n    Object.assign(\n      component.state,\n      component.constructor.getDerivedStateFromProps(props, prevState)\n    )\n  }\n\n  let skip = false\n  let base = component.base\n\n  if (isUpdate) {\n    component.props = prevProps\n    component.state = prevState\n    if (\n      !isForceUpdate &&\n      component.shouldComponentUpdate &&\n      component.shouldComponentUpdate(props, state) === false\n    ) {\n      skip = true\n    }\n    component.props = props\n    component.state = state\n  }\n\n  if (!skip) {\n    const vnode = component.render()\n    base = diff(component.base, vnode, props)\n\n    component.base = base\n    component.base._component = component\n\n    if (isUpdate) {\n      component.componentDidUpdate &&\n        component.componentDidUpdate(prevProps, prevState)\n    } else {\n      component.componentDidMount && component.componentDidMount()\n    }\n\n    component.prevProps = component.props\n    component.prevState = component.state\n  }\n\n  return base\n}\n\nexport function unmountComponent(component) {\n  if (component.componentWillUnMount) {\n    component.componentWillUnMount()\n  }\n  if (component.base && component.base.parnetNode) {\n    component.base._component = null\n    component.base.parnetNode.removeChild(component.base)\n  }\n}\n\nexport function setComponentProps(component, props) {\n  component.props = props || {}\n  return renderComponent(component)\n}\n\nconst stateQueue = []\nconst renderQueue = []\nexport function enqueueSetState(stateChange, component) {\n  if (stateQueue.length === 0) {\n    Promise.resolve().then(flushComponent)\n  }\n\n  stateQueue.push({ stateChange, component })\n\n  if (!renderQueue.includes(component)) {\n    renderQueue.push(component)\n  }\n}\n\nfunction flushComponent() {\n  let item\n  while ((item = stateQueue.shift())) {\n    const { stateChange, component } = item\n\n    if (!component.prevState) {\n      component.prevState = Object.assign({}, component.state)\n    }\n\n    Object.assign(\n      component.state,\n      typeof stateChange === 'function'\n        ? stateChange(component.prevState, component.props)\n        : stateChange\n    )\n\n    component.prevState = component.state\n  }\n\n  let component\n  while ((component = renderQueue.shift())) {\n    renderComponent(component)\n  }\n}\n","import { enqueueSetState, renderComponent } from '../react-dom/component'\n\nexport default class Component {\n  constructor(props = {}) {\n    this.state = {}\n    this.props = props\n  }\n\n  setState(state) {\n    enqueueSetState(state, this)\n  }\n\n  forceUpdate() {\n    renderComponent(this, true)\n  }\n}\n","// index.js\nimport createElement from './create-element'\nimport Component from './component'\n\nexport default {\n  createElement,\n  Component\n}\n","import diff from './diff'\n\nexport default function render(vnode, container) {\n  diff(null, vnode, container)\n}\n","import render from './render'\n\nexport default {\n  render\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nclass Title extends React.Component {\n  render() {\n    return <h1>{this.props.text}</h1>\n  }\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      greet: 'Hello',\n      name: 'xiao han',\n      count: 0\n    }\n    this.handleAdd = this.handleAdd.bind(this)\n  }\n\n  shoudComponentUpdate(nextProps, nextState) {\n    console.log('should update')\n    return true\n  }\n\n  // render之后的生命周期\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    console.log('get snapshot')\n    return null\n  }\n\n  componentDidMount(prevProps, prevState) {\n    console.log('did mount')\n    setTimeout(() => {\n      this.setState({ name: 'xiao ming' })\n    }, 1000)\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    console.log('did update')\n  }\n\n  componentWillUnmount() {\n    console.log('i will be die')\n  }\n\n  handleAdd() {\n    this.setState({ count: this.state.count + 1 })\n  }\n\n  render() {\n    const { greet, name, count } = this.state\n\n    return (\n      <div id='app'>\n        <Title text={greet} />\n        <p>My name is {name}</p>\n        <Title text={'count is ' + count} />\n        <button onClick={this.handleAdd}>add Count</button>\n      </div>\n    )\n  }\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n"]}